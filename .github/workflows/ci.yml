name: AI Collaboration Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  validation:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Verify file structure
      run: |
        echo "ğŸ“ é¡¹ç›®ç»“æ„æ£€æŸ¥..."
        ls -la
        echo "âœ… å¿…éœ€æ–‡ä»¶æ£€æŸ¥"
        [ -f "README.md" ] && echo "âœ“ README.mdå­˜åœ¨" || echo "âœ— README.mdç¼ºå¤±"
        [ -f "CONTRIBUTING.md" ] && echo "âœ“ CONTRIBUTING.mdå­˜åœ¨" || echo "âœ— CONTRIBUTING.mdç¼ºå¤±"
        
    - name: Check for AI content
      if: github.event_name == 'pull_request'
      run: |
        echo "ğŸ” æ£€æŸ¥AIç”Ÿæˆå†…å®¹..."
        PR_TITLE="${{ github.event.pull_request.title }}"
        if [[ "$PR_TITLE" == *"[AI-generated]"* ]] || [[ "$PR_TITLE" == *"[AI]"* ]]; then
          echo "âš ï¸ è­¦å‘Šï¼šæ­¤PRåŒ…å«AIç”Ÿæˆä»£ç "
          echo "è¯·ç¡®ä¿è¿›è¡Œäººå·¥ä»£ç å®¡æŸ¥ï¼"
          echo "::warning::AI-generated code detected. Human review required!"
        fi

  python-check:
    runs-on: ubuntu-latest
    if: "contains(github.event.head_commit.message, '.py') || contains(github.event.pull_request.title, 'python')"
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-python@v5
      with:
        python-version: '3.10'
    - name: Install Python dependencies
      run: |
        python -m pip install --upgrade pip
        if [ -f "requirements.txt" ]; then pip install -r requirements.txt; fi
    - name: Check Python files
      run: |
        find . -name "*.py" -not -path "./.*" | xargs -I {} echo "Found: {}"
